<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EIN Fuel Extraction NZ - Emergency Wrong Fuel Recovery | Extract, Inspect, Neutralize</title>
  <meta name="description" content="EIN Fuel Extraction - Emergency wrong fuel recovery across New Zealand. Extract contaminated fuel, inspect damage, neutralize risk. Petrol in diesel or diesel in petrol - fast, safe, fully insured." />
  <meta name="keywords" content="EIN fuel extraction, wrong fuel recovery NZ, fuel contamination, petrol in diesel, diesel in petrol, emergency fuel drain, fuel inspection, fuel neutralization, wrong fuel rescue" />
  <meta name="author" content="EIN Fuel Extraction" />
  <meta property="og:title" content="EIN Fuel Extraction NZ - Emergency Wrong Fuel Recovery | Extract, Inspect, Neutralize" />
  <meta property="og:description" content="Emergency wrong fuel recovery across New Zealand. Extract contaminated fuel, inspect damage, neutralize risk. Fast, safe, fully insured." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.ein.nz" />
  <meta property="og:site_name" content="EIN Fuel Extraction" />

  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self';
script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com https://www.redditstatic.com https://googleads.g.doubleclick.net https://widget.reviewability.com;
style-src 'self' 'unsafe-inline' https://widget.reviewability.com;
img-src 'self' data: https: https://app.revu.cloud https://widget.reviewability.com;
connect-src 'self' https://www.google-analytics.com https://www.redditstatic.com https://pixel-config.reddit.com https://conversions-config.reddit.com https://www.googletagmanager.com https://googleads.g.doubleclick.net https://www.google.com https://www.googleadservices.com https://www.google.hn https://app.revu.cloud https://widget.reviewability.com https://www.eek.nz https://default61ffc6bcd9ce458b8120d32187c377.0d.environment.api.powerplatform.com;
frame-src 'self' https://td.doubleclick.net https://www.googletagmanager.com https://app.revu.cloud https://widget.reviewability.com;
font-src 'self' data:;">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">

  <!-- Reddit Pixel -->
  <script>
    !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);
    
    function getEmailFromForm() {
      const urlParams = new URLSearchParams(window.location.search);
      const emailParam = urlParams.get('email');
      if (emailParam) return emailParam;
      
      const emailInputs = document.querySelectorAll('input[type="email"], input[name*="email"], input[id*="email"]');
      for (let input of emailInputs) {
        if (input.value && input.value.includes('@')) {
          return input.value;
        }
      }
      return null;
    }
    
    function getPhoneFromForm() {
      const urlParams = new URLSearchParams(window.location.search);
      const phoneParam = urlParams.get('phone');
      if (phoneParam) return phoneParam;
      
      const phoneInputs = document.querySelectorAll('input[type="tel"], input[name*="phone"], input[id*="phone"]');
      for (let input of phoneInputs) {
        if (input.value) {
          return input.value;
        }
      }
      return null;
    }
    
    function getUserId() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('uid') || urlParams.get('user_id') || urlParams.get('customer_id');
    }
    
    function getMobileIds() {
      const urlParams = new URLSearchParams(window.location.search);
      return {
        idfa: urlParams.get('idfa'),
        aaid: urlParams.get('aaid')
      };
    }
    
    const mobileIds = getMobileIds();
    const initConfig = {};
    
    const email = getEmailFromForm();
    const phoneNumber = getPhoneFromForm();
    const externalId = getUserId();
    
    if (email) initConfig.email = email;
    if (phoneNumber) initConfig.phoneNumber = phoneNumber;
    if (externalId) initConfig.externalId = externalId;
    if (mobileIds.idfa) initConfig.idfa = mobileIds.idfa;
    if (mobileIds.aaid) initConfig.aaid = mobileIds.aaid;
    
    rdt('init', 'a2_hf16791nsdhx', Object.keys(initConfig).length > 0 ? initConfig : undefined);
    rdt('track', 'PageVisit');
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17084465163"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-17084465163');
    gtag('config', 'G-DQNKF1YLWR');
  </script>

  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <style>
    :root {
      --primary: #dc3545;
      --primary-light: #e74c3c;
      --secondary: #ff5500;
      --success: #28a745;
      --warning: #ffc107;
      --info: #17a2b8;
      --light: #f8f9fa;
      --dark: #343a40;
      --white: #ffffff;
      --gray-100: #f8f9fa;
      --gray-200: #e9ecef;
      --gray-300: #dee2e6;
      --gray-400: #ced4da;
      --gray-500: #adb5bd;
      --gray-600: #6c757d;
      --gray-700: #495057;
      --gray-800: #343a40;
      --gray-900: #212529;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
      --border-radius: 8px;
      --border-radius-lg: 12px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--gray-800);
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header */
    .header {
      background: var(--white);
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 1rem 0;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo {
      width: 60px;
      height: 60px;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
    }

    .brand-info h1 {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.25rem;
    }

    .brand-info .tagline {
      font-size: 0.9rem;
      color: var(--gray-600);
      font-weight: 500;
    }

    .contact-info {
      text-align: right;
    }

    .phone-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      text-decoration: none;
      display: block;
      margin-bottom: 0.25rem;
    }

    .phone-number:hover {
      color: var(--primary-light);
    }

    .availability {
      font-size: 0.85rem;
      color: var(--success);
      font-weight: 600;
    }

    /* Main Content */
    .main-content {
      padding: 3rem 0;
    }

    .hero-section {
      text-align: center;
      margin-bottom: 4rem;
    }

    .hero-title {
      font-size: 3rem;
      font-weight: 800;
      color: var(--dark);
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      color: var(--gray-700);
      margin-bottom: 2rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .emergency-banner {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: var(--white);
      padding: 1.5rem;
      border-radius: var(--border-radius-lg);
      margin-bottom: 3rem;
      box-shadow: var(--shadow-lg);
    }

    .emergency-banner h2 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .emergency-banner p {
      font-size: 1.1rem;
      opacity: 0.95;
    }

    /* Service Cards */
    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 4rem;
    }

    .service-card {
      background: var(--white);
      border-radius: var(--border-radius-lg);
      padding: 2rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
      border: 2px solid transparent;
    }

    .service-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary);
    }

    .service-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      display: block;
    }

    .service-card h3 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 1rem;
    }

    .service-card p {
      color: var(--gray-600);
      margin-bottom: 1.5rem;
    }

    .service-features {
      list-style: none;
      margin-bottom: 1.5rem;
    }

    .service-features li {
      padding: 0.5rem 0;
      color: var(--gray-700);
      position: relative;
      padding-left: 1.5rem;
    }

    .service-features li::before {
      content: "✓";
      position: absolute;
      left: 0;
      color: var(--success);
      font-weight: bold;
    }

    /* CTA Section */
    .cta-section {
      background: var(--white);
      border-radius: var(--border-radius-lg);
      padding: 3rem;
      text-align: center;
      box-shadow: var(--shadow-lg);
      margin-bottom: 4rem;
    }

    .cta-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 1rem;
    }

    .cta-subtitle {
      font-size: 1.2rem;
      color: var(--gray-600);
      margin-bottom: 2rem;
    }

    .cta-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 2rem;
    }

    .btn {
      padding: 1rem 2rem;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      font-weight: 600;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: var(--transition);
      cursor: pointer;
      min-width: 200px;
      justify-content: center;
    }

    .btn-primary {
      background: var(--primary);
      color: var(--white);
    }

    .btn-primary:hover {
      background: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-secondary {
      background: var(--secondary);
      color: var(--white);
    }

    .btn-secondary:hover {
      background: #e64a00;
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: var(--white);
    }

    /* Trust Indicators */
    .trust-section {
      background: var(--gray-100);
      border-radius: var(--border-radius-lg);
      padding: 2rem;
      margin-bottom: 3rem;
    }

    .trust-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      text-align: center;
    }

    .trust-item {
      padding: 1rem;
    }

    .trust-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      display: block;
    }

    .trust-item h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 0.5rem;
    }

    .trust-item p {
      font-size: 0.9rem;
      color: var(--gray-600);
    }

    /* Booking Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background-color: var(--white);
      margin: 5% auto;
      padding: 0;
      border-radius: var(--border-radius-lg);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }

    .modal-header {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: var(--white);
      padding: 1.5rem;
      border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      margin: 0;
      font-size: 1.5rem;
    }

    .close {
      color: var(--white);
      font-size: 2rem;
      font-weight: bold;
      cursor: pointer;
      opacity: 0.8;
    }

    .close:hover {
      opacity: 1;
    }

    .modal-body {
      padding: 2rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--dark);
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--gray-300);
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    /* Sticky Elements */
    .sticky-call {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary);
      color: var(--white);
      padding: 1rem 1.5rem;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .sticky-call:hover {
      background: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(220, 53, 69, 0.3);
    }

    .sticky-call.after-hours {
      background: var(--success);
    }

    .sticky-call.after-hours:hover {
      background: #218838;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 2rem;
      }

      .hero-subtitle {
        font-size: 1.1rem;
      }

      .cta-title {
        font-size: 2rem;
      }

      .cta-buttons {
        flex-direction: column;
        align-items: center;
      }

      .btn {
        width: 100%;
        max-width: 300px;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .header-content {
        flex-direction: column;
        text-align: center;
      }

      .contact-info {
        text-align: center;
      }

      .modal-content {
        width: 95%;
        margin: 10% auto;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 15px;
      }

      .hero-title {
        font-size: 1.75rem;
      }

      .cta-section {
        padding: 2rem 1rem;
      }

      .modal-body {
        padding: 1.5rem;
      }

      .sticky-call {
        bottom: 15px;
        right: 15px;
        padding: 0.75rem 1.25rem;
        font-size: 1rem;
      }
    }

    /* Loading States */
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }

    .spinner {
      border: 3px solid var(--gray-300);
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 0.5rem;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Utility Classes */
    .text-center { text-align: center; }
    .text-primary { color: var(--primary); }
    .text-success { color: var(--success); }
    .text-warning { color: var(--warning); }
    .text-muted { color: var(--gray-600); }
    .mb-0 { margin-bottom: 0; }
    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mb-3 { margin-bottom: 1.5rem; }
    .mb-4 { margin-bottom: 2rem; }
    .mt-0 { margin-top: 0; }
    .mt-1 { margin-top: 0.5rem; }
    .mt-2 { margin-top: 1rem; }
    .mt-3 { margin-top: 1.5rem; }
    .mt-4 { margin-top: 2rem; }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo-section">
          <img src="brand-image.png" alt="EIN Fuel Extraction" class="logo">
          <div class="brand-info">
            <h1>EIN Fuel Extraction</h1>
            <p class="tagline">Extract, Inspect, Neutralize</p>
          </div>
        </div>
        <div class="contact-info">
          <a href="tel:0800769000" class="phone-number" onclick="trackConversion('header_call', 'Contact')">0800 769 000</a>
          <p class="availability">24/7 Emergency Service</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Hero Section -->
      <section class="hero-section">
        <h1 class="hero-title">Wrong Fuel Emergency?</h1>
        <p class="hero-subtitle">Don't start your engine! EIN Fuel Extraction provides professional wrong fuel recovery across New Zealand. We extract contaminated fuel, inspect for damage, and neutralize risk - keeping you safe and your engine protected.</p>
      </section>

      <!-- Emergency Banner -->
      <section class="emergency-banner">
        <h2>⚠️ DON'T START YOUR CAR</h2>
        <p>Starting your engine with wrong fuel can cause thousands in damage. Call EIN immediately for professional fuel extraction service.</p>
      </section>

      <!-- Services Grid -->
      <section class="services-grid">
        <div class="service-card">
          <span class="service-icon">⛽</span>
          <h3>Extract</h3>
          <p>Professional fuel contamination removal using specialized equipment</p>
          <ul class="service-features">
            <li>Complete fuel system drainage</li>
            <li>Contaminated fuel disposal</li>
            <li>System flushing and cleaning</li>
          </ul>
        </div>

        <div class="service-card">
          <span class="service-icon">🔍</span>
          <h3>Inspect</h3>
          <p>Comprehensive fuel system damage assessment and reporting</p>
          <ul class="service-features">
            <li>Fuel system inspection</li>
            <li>Damage assessment report</li>
            <li>Repair recommendations</li>
          </ul>
        </div>

        <div class="service-card">
          <span class="service-icon">🛡️</span>
          <h3>Neutralize</h3>
          <p>Risk mitigation and system protection to prevent further damage</p>
          <ul class="service-features">
            <li>System protection treatment</li>
            <li>Preventive measures</li>
            <li>Safety recommendations</li>
          </ul>
        </div>
      </section>

      <!-- CTA Section -->
      <section class="cta-section">
        <h2 class="cta-title">Get Professional Help Now</h2>
        <p class="cta-subtitle">Most jobs dispatched in under 30 minutes. Comprehensive service is cheaper than engine damage.</p>
        
        <div class="cta-buttons">
          <a href="tel:0800769000" class="btn btn-primary" onclick="trackConversion('fuel_drain_call', 'Contact')">
            📞 Call Now - 0800 769 000
          </a>
          <button class="btn btn-secondary" onclick="openBookingModal()">
            📅 Book Online
          </button>
        </div>

        <p class="text-muted">Available 24/7 across New Zealand • Fully Insured • Professional Service</p>
      </section>

      <!-- Trust Indicators -->
      <section class="trust-section">
        <div class="trust-grid">
          <div class="trust-item">
            <span class="trust-icon">🏆</span>
            <h4>Professional Service</h4>
            <p>Certified technicians with specialized equipment</p>
          </div>
          <div class="trust-item">
            <span class="trust-icon">🛡️</span>
            <h4>Fully Insured</h4>
            <p>Comprehensive insurance coverage for your peace of mind</p>
          </div>
          <div class="trust-item">
            <span class="trust-icon">⚡</span>
            <h4>Fast Response</h4>
            <p>Most jobs dispatched within 30 minutes</p>
          </div>
          <div class="trust-item">
            <span class="trust-icon">🇳🇿</span>
            <h4>Nationwide Coverage</h4>
            <p>Service available across New Zealand</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Sticky Call Button -->
  <a href="tel:0800769000" class="sticky-call normal-hours-only" onclick="trackConversion('sticky_call', 'Contact')" id="stickyCallButton">
    📞 Call Now
  </a>
  <a href="#booking" class="sticky-call after-hours" id="stickyClosedButton" style="display: none;" onclick="openBookingModal()">
    📅 Book Online
  </a>

  <!-- Booking Modal -->
  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Book Fuel Extraction Service</h2>
        <span class="close" onclick="closeBookingModal()">&times;</span>
      </div>
      <div class="modal-body">
        <form id="bookingForm">
          <div class="form-group">
            <label for="customerName">Your Name *</label>
            <input type="text" id="customerName" name="customerName" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="customerPhone">Phone Number *</label>
              <input type="tel" id="customerPhone" name="customerPhone" required>
            </div>
            <div class="form-group">
              <label for="customerEmail">Email Address</label>
              <input type="email" id="customerEmail" name="customerEmail">
            </div>
          </div>

          <div class="form-group">
            <label for="serviceLocation">Service Location *</label>
            <input type="text" id="serviceLocation" name="serviceLocation" placeholder="Enter your address, suburb, or region" required>
          </div>

          <div class="form-group">
            <label for="vehicleDetails">Vehicle Details *</label>
            <input type="text" id="vehicleDetails" name="vehicleDetails" placeholder="Year, Make, Model (e.g., 2020 Toyota Corolla)" required>
          </div>

          <div class="form-group">
            <label for="fuelType">Wrong Fuel Type *</label>
            <select id="fuelType" name="fuelType" required>
              <option value="">Select fuel type</option>
              <option value="petrol-in-diesel">Petrol in Diesel Vehicle</option>
              <option value="diesel-in-petrol">Diesel in Petrol Vehicle</option>
              <option value="unknown">Not Sure</option>
            </select>
          </div>

          <div class="form-group">
            <label for="urgency">Service Urgency *</label>
            <select id="urgency" name="urgency" required>
              <option value="">Select urgency</option>
              <option value="emergency">Emergency - Within 1 hour</option>
              <option value="urgent">Urgent - Within 2-4 hours</option>
              <option value="standard">Standard - Next available slot</option>
            </select>
          </div>

          <div class="form-group">
            <label for="additionalInfo">Additional Information</label>
            <textarea id="additionalInfo" name="additionalInfo" rows="3" placeholder="Any additional details about your situation..."></textarea>
          </div>

          <div class="form-group">
            <button type="submit" class="btn btn-primary" style="width: 100%;">
              Submit Booking Request
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer style="background: var(--dark); color: var(--white); padding: 2rem 0; margin-top: 4rem;">
    <div class="container">
      <div style="text-align: center;">
        <p>&copy; 2025 EIN Fuel Extraction (EEK Mechanical Ltd). All rights reserved.</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Company No: 9365185 | NZBN: 9429053064165</p>
        <div style="margin-top: 1rem;">
          <a href="/more-options" style="color: var(--white); text-decoration: none; margin: 0 1rem;">More Options</a>
          <a href="/privacy" style="color: var(--white); text-decoration: none; margin: 0 1rem;">Privacy Policy</a>
          <a href="/terms" style="color: var(--white); text-decoration: none; margin: 0 1rem;">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Reviews Widget -->
  <div data-bid="157676" data-url="https://app.revu.cloud" data-aid="23788">
    <script src="https://widget.reviewability.com/js/widgetAdv.min.js" async></script>
  </div>

  <script>
    // === TRACKING AND API FUNCTIONALITY ===
    // Preserve all existing tracking, phone logic, and API calls

    // Session and GCLID Management
    function getOrCreateSessionId() {
      let sid = localStorage.getItem("eek_session_id");
      
      if (!sid) {
        const urlParams = new URLSearchParams(window.location.search);
        sid = urlParams.get('session_id');
        
        if (sid) {
          localStorage.setItem("eek_session_id", sid);
        } else {
          sid = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
          localStorage.setItem("eek_session_id", sid);
        }
      }
      
      return sid;
    }

    function getAndStoreGCLID() {
      const urlParams = new URLSearchParams(window.location.search);
      const gclid = urlParams.get('gclid') || urlParams.get('gbraid') || urlParams.get('wbraid');
      
      if (gclid) {
        localStorage.setItem("eek_gclid", gclid);
        localStorage.setItem("eek_gclid_timestamp", new Date().toISOString());
        return gclid;
      }
      
      const storedGclid = localStorage.getItem("eek_gclid");
      const storedTimestamp = localStorage.getItem("eek_gclid_timestamp");
      
      if (storedGclid && storedTimestamp) {
        const thirtyDaysAgo = new Date();
        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
        
        if (new Date(storedTimestamp) > thirtyDaysAgo) {
          return storedGclid;
        } else {
          localStorage.removeItem("eek_gclid");
          localStorage.removeItem("eek_gclid_timestamp");
        }
      }
      
      return null;
    }

    // Call Tracking
    function sendCallClick(eventAction, eventCategory, anchorEl) {
      const callAttemptId = "call_" + Date.now() + "_" + Math.random().toString(36).slice(2,10);
      const sessionId = getOrCreateSessionId();
      const gclid = getAndStoreGCLID();
      
      const payload = {
        eventType: "call_click",
        timestamp: new Date().toISOString(),
        sessionId: sessionId,
        callAttemptId: callAttemptId,
        gclid: gclid,
        eventAction: eventAction,
        eventCategory: eventCategory,
        url: window.location.href,
        userAgent: navigator.userAgent,
        referrer: document.referrer
      };

      fetch('https://default61ffc6bcd9ce458b8120d32187c377.0d.environment.api.powerplatform.com/api/eek/call-tracking', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(payload)
      }).catch(error => {
        console.log('Call tracking error:', error);
      });
    }

    // Conversion Tracking
    function trackConversion(eventAction, eventCategory) {
      const conversionId = 'eek_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      
      const serviceValues = {
        'fuel_drain_call': 39900,
        'header_call': 25000,
        'sticky_call': 25000,
        'booking_submit': 35000
      };

      const serviceMap = {
        'fuel_drain_call': 'Wrong Fuel Rescue',
        'header_call': 'General Inquiry',
        'sticky_call': 'General Inquiry',
        'booking_submit': 'Online Booking'
      };

      const conversionValue = serviceValues[eventAction] || 25000;
      const serviceName = serviceMap[eventAction] || 'General Service';

      // Google Analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'conversion', {
          'send_to': 'AW-17084465163',
          'value': conversionValue,
          'currency': 'NZD',
          'transaction_id': conversionId
        });
      }

      // Reddit Pixel
      if (typeof rdt !== 'undefined') {
        rdt('track', 'Purchase', {
          value: conversionValue,
          currency: 'NZD'
        });
      }

      // Call tracking for phone calls
      if (eventAction && /call/i.test(eventAction)) {
        sendCallClick(eventAction, eventCategory, null);
      }

      console.log('Conversion tracked:', eventAction, serviceName, conversionValue);
    }

    // Phone Number Management
    function updatePhoneNumbers() {
      const phoneElements = document.querySelectorAll('.phone-number, .sticky-call[href^="tel:"]');
      const currentHour = new Date().getHours();
      const isBusinessHours = currentHour >= 8 && currentHour < 18;
      
      phoneElements.forEach(element => {
        if (isBusinessHours) {
          element.href = 'tel:0800769000';
          element.textContent = element.textContent.replace(/0800\s*\d{3}\s*\d{3}/g, '0800 769 000');
        } else {
          element.href = 'tel:0800769000';
          element.textContent = element.textContent.replace(/0800\s*\d{3}\s*\d{3}/g, '0800 769 000');
        }
      });
    }

    // Business Hours Management
    function updateBusinessHours() {
      const currentHour = new Date().getHours();
      const isBusinessHours = currentHour >= 8 && currentHour < 18;
      
      const normalHoursElements = document.querySelectorAll('.normal-hours-only');
      const afterHoursElements = document.querySelectorAll('.after-hours');
      
      normalHoursElements.forEach(element => {
        element.style.display = isBusinessHours ? 'block' : 'none';
      });
      
      afterHoursElements.forEach(element => {
        element.style.display = isBusinessHours ? 'none' : 'block';
      });
    }

    // Modal Functions
    function openBookingModal() {
      document.getElementById('bookingModal').style.display = 'block';
      trackConversion('booking_modal_open', 'Engagement');
    }

    function closeBookingModal() {
      document.getElementById('bookingModal').style.display = 'none';
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('bookingModal');
      if (event.target === modal) {
        closeBookingModal();
      }
    }

    // Booking Form Submission
    document.getElementById('bookingForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const bookingData = {
        customerName: formData.get('customerName'),
        customerPhone: formData.get('customerPhone'),
        customerEmail: formData.get('customerEmail'),
        serviceLocation: formData.get('serviceLocation'),
        vehicleDetails: formData.get('vehicleDetails'),
        fuelType: formData.get('fuelType'),
        urgency: formData.get('urgency'),
        additionalInfo: formData.get('additionalInfo'),
        timestamp: new Date().toISOString(),
        sessionId: getOrCreateSessionId(),
        gclid: getAndStoreGCLID()
      };

      // Track conversion
      trackConversion('booking_submit', 'Booking');

      // Submit to API
      fetch('https://default61ffc6bcd9ce458b8120d32187c377.0d.environment.api.powerplatform.com/api/eek/bookings', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(bookingData)
      })
      .then(response => response.json())
      .then(data => {
        alert('Booking request submitted successfully! We will contact you shortly.');
        closeBookingModal();
        this.reset();
      })
      .catch(error => {
        console.error('Booking error:', error);
        alert('There was an error submitting your booking. Please try calling us directly at 0800 769 000.');
      });
    });

    // Initialize on page load
    window.addEventListener('load', function() {
      console.log('🚀 EIN Fuel Extraction page loaded');
      
      updatePhoneNumbers();
      updateBusinessHours();
      
      // Update every minute
      setInterval(updateBusinessHours, 60000);
      
      const gclid = getAndStoreGCLID();
      if (gclid) {
        console.log('GCLID detected:', gclid);
      }
    });

    // Track page view
    trackConversion('page_view', 'Engagement');
  </script>
</body>
</html>